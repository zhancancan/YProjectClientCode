using pure.entity.animation;
using pure.entity.interfaces;
using pure.refactor.property;
using pure.stateMachine.machine.core;
using pure.stateMachine.machine.runtime;
using UnityEngine;

namespace machine.ai {
    [CpxAction(CommandActionType.STAND)]
    public class AICommand_Stand : CpxAction {
        [Editable(0)]
        public string notifyCommand { get; set; }

        [Editable(1)]
        public float updateInterval { get; set; }

        [Editable(2)]
        public float standModePercent { get; set; }

        public override RpxAction GetRuntime() {
            return new Runtime(this);
        }

        private class Runtime : RpxAction {
            internal Runtime(CpxAction act) : base(act) {
            }

            public override void Enter() {
                IAnimatable a = entity as IAnimatable;
                if (a != null) {
                    a.SetAnimator(AnimatorType.IS_RUNNING, AnimatorControllerParameterType.Bool, 0);
                }
            }

            public override void UpdateNow(long now) {
            }

            public override void Exit() {
            }

            public override bool running { get { return true; } }
        }
    }
}